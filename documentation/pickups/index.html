<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>

	<meta charset="utf-8" />
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<title>8 - Pickups | HaxeFlixel 2D Game Engine</title>

	<meta name="description" content="HaxeFlixel is a 2D Game Engine that lets you create cross-platform games easier with free, open source technology!" />
	<meta name="keywords" content="gamedev, game development, cross-platform, haxe, flixel" />
	<meta name="author" content="" />
	<meta name="viewport" content="width=device-width" />

	<link rel="shortcut icon" href="/images/favicon.ico" />

	<!--[if lt IE 9]>
	<script async src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<link rel="stylesheet" href="/styles/style.css" />

</head>


<body>

<header>
	<nav>

		<div class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">

				<div class="navbar-header">
					<button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
						<span class="icon-bar">
						<span class="icon-bar">
						<span class="icon-bar">
					</span></span></span></button>
					<a href="/" class="navbar-brand"><img src="/images/haxeflixel-header.png" alt="HaxeFlixel" /></a>
				</div>

				<div class="navbar-collapse collapse">

					<ul class="nav navbar-nav">

						<li class="dropdown ">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Examples <span class="caret"></span></a>
							<ul class="dropdown-menu inverse-dropdown">
							  <li><a href="/demos">Demos</a></li>
							  <li><a href="https://snippets.haxeflixel.com/">Snippets</a></li>
							</ul>
						</li>

						<li>
							<a href="/showcase">Showcase</a>
						</li>

						<li>
							<a href="/blog">Blog</a>
						</li>

						<li class="active">
							<a href="/documentation">Docs</a>
						</li>

						<li>
							<a href="http://api.haxeflixel.com">API</a>
						</li>

						<li>
							<a href="https://github.com/HaxeFlixel/flixel/discussions">Forum</a>
						</li>

					</ul>
		
					<form class="navbar-form search-form" role="search" action="https://google.com/search" method="get">
    <div class="form-group">
        <input type="search" name="q" class="form-control" placeholder="Search" />
        <input type="hidden" name="q" value="site:http://haxeflixel.com" />
    </div>
</form>

				</div>

			</div>

		</div>

	</nav>
</header>

<div class="container container-main">
	<div class="row">

		<div class="col-md-3">
			<div class="doc-nav affix">
				<ul class="nav">



	<li>
		<h4><a href="/documentation/getting-started">Getting Started</a></h4><h4>
	</h4></li>

	



	<li>
		<h4><a href="/documentation/tutorial">Tutorial</a></h4><h4>
	</h4></li>

	
		
			<li class="about=&quot;/documentation/tutorial&quot;">
				<a href="/documentation/tutorial"> Tutorial </a>
			</li>
		
			<li class="about=&quot;/documentation/the-power-of-haxeflixel&quot;">
				<a href="/documentation/the-power-of-haxeflixel"> The Power of HaxeFlixel </a>
			</li>
		
			<li class="about=&quot;/documentation/setup&quot;">
				<a href="/documentation/setup"> 1 - Setup </a>
			</li>
		
			<li class="about=&quot;/documentation/creating-a-new-project&quot;">
				<a href="/documentation/creating-a-new-project"> 2 - Creating a new project </a>
			</li>
		
			<li class="about=&quot;/documentation/groundwork&quot;">
				<a href="/documentation/groundwork"> 3 - Groundwork </a>
			</li>
		
			<li class="about=&quot;/documentation/sprites-and-animation&quot;">
				<a href="/documentation/sprites-and-animation"> 4 - Sprites and Animation </a>
			</li>
		
			<li class="about=&quot;/documentation/creating-a-tilemap&quot;">
				<a href="/documentation/creating-a-tilemap"> 5 - Creating a Tilemap </a>
			</li>
		
			<li class="about=&quot;/documentation/loading-the-tilemap&quot;">
				<a href="/documentation/loading-the-tilemap"> 6 - Loading the Tilemap </a>
			</li>
		
			<li class="about=&quot;/documentation/zoom-and-cameras&quot;">
				<a href="/documentation/zoom-and-cameras"> 7 - Zoom and Cameras </a>
			</li>
		
			<li class="active" about="/documentation/pickups">
				<a href="/documentation/pickups"> 8 - Pickups </a>
			</li>
		
			<li class="about=&quot;/documentation/enemies-and-basic-ai&quot;">
				<a href="/documentation/enemies-and-basic-ai"> 9 - Enemies and Basic AI </a>
			</li>
		
			<li class="about=&quot;/documentation/ui-and-combat&quot;">
				<a href="/documentation/ui-and-combat"> 10 - UI and Combat </a>
			</li>
		
			<li class="about=&quot;/documentation/game-over-menu&quot;">
				<a href="/documentation/game-over-menu"> 11 - Game Over Menu </a>
			</li>
		
			<li class="about=&quot;/documentation/sound-and-music&quot;">
				<a href="/documentation/sound-and-music"> 12 - Sound and Music </a>
			</li>
		
			<li class="about=&quot;/documentation/multiple-platforms&quot;">
				<a href="/documentation/multiple-platforms"> 13 - Multiple Platforms </a>
			</li>
		
			<li class="about=&quot;/documentation/polish&quot;">
				<a href="/documentation/polish"> 14 - Polish </a>
			</li>
		
			<li class="about=&quot;/documentation/conclusion&quot;">
				<a href="/documentation/conclusion"> Conclusion </a>
			</li>
		
	



	<li>
		<h4><a href="/documentation/haxeflixel-handbook">HaxeFlixel Handbook</a></h4><h4>
	</h4></li>

	



	<li>
		<h4><a href="/documentation/resources">Resources</a></h4><h4>
	</h4></li>

	



	<li>
		<h4><a href="/documentation/community">Community</a></h4><h4>
	</h4></li>

	



</ul>
			</div>
		</div>

		<div class="col-md-9 doc-content" role="main">
			<h1 class="title">8 - Pickups</h1>

			
			<a href="https://github.com/HaxeFlixel/flixel-docs/blob/master/documentation/01_tutorial/09-8-pickups.html.md" class="btn btn-sm btn-edit" target="_blank"><span class="glyphicon glyphicon-pencil"></span> Edit </a>

			<p>Now that we have our little guy running around our map, lets give him something to pick up. We'll add some simple coins that will add to the player's score when they are picked up.</p>
<ol>
<li><p>Open up your project in Ogmo again, and click <code>Edit Project</code>.</p>
</li>
<li><p>On the <code>Entities</code> tab, add a new entity:</p>
<p> <img src="../images/01_tutorial/ogmo_project_entities_coin.png" style="width:100%;" /></p>
</li>
<li><p>Open up the level we used before, and, on the 'entities' layer, scatter a bunch of coins around:</p>
<p> <img src="../images/01_tutorial/ogmo_editor_entities_coins.png" style="width:100%;" /></p>
</li>
<li><p>We're going to make our coins be 8x8 pixels. For the coin's graphic, you can use this image <img src="https://raw.githubusercontent.com/HaxeFlixel/flixel-demos/master/Tutorials/TurnBasedRPG/assets/images/coin.png" alt="" />, or make your own. Make sure you save this in <code>assets/images</code>.</p>
</li>
<li><p>Get back into VSCode, and make a new <code>Coin</code> class:</p>
<pre xmlns="" class="highlighted">
<span class="mtk1"> </span><span class="mtk5">package</span><span class="mtk1">;</span>

<span class="mtk1"> </span><span class="mtk16">import</span><span class="mtk1"> flixel.</span><span class="mtk11">FlxSprite</span><span class="mtk1">;</span>

<span class="mtk1"> </span><span class="mtk5">class</span><span class="mtk1"> </span><span class="mtk11">Coin</span><span class="mtk1"> </span><span class="mtk5">extends</span><span class="mtk1"> </span><span class="mtk11">FlxSprite</span>
<span class="mtk1"> {</span>
<span class="mtk1">     </span><span class="mtk5">public</span><span class="mtk1"> </span><span class="mtk5">function</span><span class="mtk1"> </span><span class="mtk5">new</span><span class="mtk1">(</span><span class="mtk13">x</span><span class="mtk17">:</span><span class="mtk11">Float</span><span class="mtk1">, </span><span class="mtk13">y</span><span class="mtk17">:</span><span class="mtk11">Float</span><span class="mtk1">) </span>
<span class="mtk1">     {</span>
<span class="mtk1">         </span><span class="mtk5">super</span><span class="mtk1">(</span><span class="mtk13">x</span><span class="mtk1">, </span><span class="mtk13">y</span><span class="mtk1">);</span>
<span class="mtk1">         </span><span class="mtk12">loadGraphic</span><span class="mtk1">(</span><span class="mtk11">AssetPaths</span><span class="mtk1">.</span><span class="mtk13">coin__png</span><span class="mtk1">, </span><span class="mtk5">false</span><span class="mtk1">, </span><span class="mtk8">8</span><span class="mtk1">, </span><span class="mtk8">8</span><span class="mtk1">);</span>
<span class="mtk1">     }</span>
<span class="mtk1"> }</span>
</pre>
</li>
<li><p>Now, head back to the <code>PlayState</code>. We need to change our map logic so that when it's loading the entities and sees a coin in our Ogmo file, it will add a <code>Coin</code> object to our state.</p>
</li>
<li><p>First, let's make a <em>group</em> to hold all the coins in. At the top of our class, where we defined all our variables so far, add:</p>
<pre xmlns="" class="highlighted">
<span class="mtk1"> </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk13">coins</span><span class="mtk17">:</span><span class="mtk11">FlxTypedGroup</span><span class="mtk1">&lt;</span><span class="mtk11">Coin</span><span class="mtk1">&gt;;</span>
</pre>
<p> Groups are like arrays of Flixel objects which can be used in a lot of different ways. In this case, since our group will only be containing coins, we will make it a <code>FlxTypedGroup&lt;Coin&gt;</code>.</p>
<p> In <code>create()</code>, after we add our walls, and before we initialize our player, we need to initialize and add our coin group:</p>
<pre xmlns="" class="highlighted">
<span class="mtk1"> </span><span class="mtk13">coins</span><span class="mtk1"> </span><span class="mtk17">=</span><span class="mtk1"> </span><span class="mtk5">new</span><span class="mtk1"> </span><span class="mtk11">FlxTypedGroup</span><span class="mtk1">&lt;</span><span class="mtk11">Coin</span><span class="mtk1">&gt;();</span>
<span class="mtk1"> </span><span class="mtk12">add</span><span class="mtk1">(</span><span class="mtk13">coins</span><span class="mtk1">);</span>
</pre>
</li>
<li><p>Next, we just want to change our <code>placeEntities()</code> function to put a coin into our group every time it encounters one in our Ogmo file. At the end of our if statement, add:</p>
<pre xmlns="" class="highlighted">
<span class="mtk1"> </span><span class="mtk16">else</span><span class="mtk1"> </span><span class="mtk16">if</span><span class="mtk1"> (</span><span class="mtk13">entity</span><span class="mtk1">.</span><span class="mtk13">name</span><span class="mtk1"> </span><span class="mtk17">==</span><span class="mtk1"> </span><span class="mtk9">"coin"</span><span class="mtk1">)</span>
<span class="mtk1"> {</span>
<span class="mtk1">     </span><span class="mtk13">coins</span><span class="mtk1">.</span><span class="mtk12">add</span><span class="mtk1">(</span><span class="mtk5">new</span><span class="mtk1"> </span><span class="mtk11">Coin</span><span class="mtk1">(</span><span class="mtk13">entity</span><span class="mtk1">.</span><span class="mtk13">x</span><span class="mtk1"> </span><span class="mtk17">+</span><span class="mtk1"> </span><span class="mtk8">4</span><span class="mtk1">, </span><span class="mtk13">entity</span><span class="mtk1">.</span><span class="mtk13">y</span><span class="mtk1"> </span><span class="mtk17">+</span><span class="mtk1"> </span><span class="mtk8">4</span><span class="mtk1">));</span>
<span class="mtk1"> }</span>
</pre>
<p> This will simply create a new coin, tell it to be at the position defined in the Ogmo file (<code>+4</code> to <code>x</code> and <code>y</code> to center it on the tile), and add it to the coin group.</p>
</li>
<li><p>Now we need to have the player be able to collect the coins. We're going to use an overlap check to do this. In <code>update()</code>, after your <code>FlxG.collide()</code> call, add:</p>
<pre xmlns="" class="highlighted">
<span class="mtk11">FlxG</span><span class="mtk1">.</span><span class="mtk12">overlap</span><span class="mtk1">(</span><span class="mtk13">player</span><span class="mtk1">, </span><span class="mtk13">coins</span><span class="mtk1">, </span><span class="mtk13">playerTouchCoin</span><span class="mtk1">);</span>
</pre>
<p>This just says: every frame, check if there are any overlaps between the player and the coin group, and if there are, call <code>playerTouchCoin</code>.</p>
</li>
<li><p>Let's add the <code>playerTouchCoin()</code> callback now:</p>
<pre xmlns="" class="highlighted">
<span class="mtk5">function</span><span class="mtk1"> </span><span class="mtk12">playerTouchCoin</span><span class="mtk1">(</span><span class="mtk13">player</span><span class="mtk17">:</span><span class="mtk11">Player</span><span class="mtk1">, </span><span class="mtk13">coin</span><span class="mtk17">:</span><span class="mtk11">Coin</span><span class="mtk1">)</span>
<span class="mtk1">{</span>
<span class="mtk1">    </span><span class="mtk16">if</span><span class="mtk1"> (</span><span class="mtk13">player</span><span class="mtk1">.</span><span class="mtk13">alive</span><span class="mtk1"> </span><span class="mtk17">&amp;&amp;</span><span class="mtk1"> </span><span class="mtk13">player</span><span class="mtk1">.</span><span class="mtk13">exists</span><span class="mtk1"> </span><span class="mtk17">&amp;&amp;</span><span class="mtk1"> </span><span class="mtk13">coin</span><span class="mtk1">.</span><span class="mtk13">alive</span><span class="mtk1"> </span><span class="mtk17">&amp;&amp;</span><span class="mtk1"> </span><span class="mtk13">coin</span><span class="mtk1">.</span><span class="mtk13">exists</span><span class="mtk1">)</span>
<span class="mtk1">    {</span>
<span class="mtk1">        </span><span class="mtk13">coin</span><span class="mtk1">.</span><span class="mtk12">kill</span><span class="mtk1">();</span>
<span class="mtk1">    }</span>
<span class="mtk1">}</span>
</pre>
<p>This function simply verifies that the player and the coin that overlap each other are both alive and exist. If so, the coin is killed (we'll add the score a little later on).</p>
<p>If you run the game right now, as you walk around the map, each coin you touch will disappear. Works great, but it's a little boringâ€¦ Let's add a little style!</p>
</li>
<li><p>Go back to your <code>Coin</code> class, and add these functions:</p>
<pre xmlns="" class="highlighted">
<span class="mtk5">override</span><span class="mtk1"> </span><span class="mtk5">function</span><span class="mtk1"> </span><span class="mtk12">kill</span><span class="mtk1">()</span>
<span class="mtk1">{</span>
<span class="mtk1">    </span><span class="mtk13">alive</span><span class="mtk1"> </span><span class="mtk17">=</span><span class="mtk1"> </span><span class="mtk5">false</span><span class="mtk1">;</span>
<span class="mtk1">    </span><span class="mtk11">FlxTween</span><span class="mtk1">.</span><span class="mtk12">tween</span><span class="mtk1">(</span><span class="mtk5">this</span><span class="mtk1">, {</span><span class="mtk13">alpha</span><span class="mtk1">: </span><span class="mtk8">0</span><span class="mtk1">, </span><span class="mtk13">y</span><span class="mtk1">: </span><span class="mtk13">y</span><span class="mtk1"> </span><span class="mtk17">-</span><span class="mtk1"> </span><span class="mtk8">16</span><span class="mtk1">}, </span><span class="mtk8">0.33</span><span class="mtk1">, {</span><span class="mtk13">ease</span><span class="mtk1">: </span><span class="mtk11">FlxEase</span><span class="mtk1">.</span><span class="mtk13">circOut</span><span class="mtk1">, </span><span class="mtk13">onComplete</span><span class="mtk1">: </span><span class="mtk13">finishKill</span><span class="mtk1">});</span>
<span class="mtk1">}</span>

<span class="mtk5">function</span><span class="mtk1"> </span><span class="mtk12">finishKill</span><span class="mtk1">(</span><span class="mtk13">_</span><span class="mtk1">)</span>
<span class="mtk1">{</span>
<span class="mtk1">    </span><span class="mtk13">exists</span><span class="mtk1"> </span><span class="mtk17">=</span><span class="mtk1"> </span><span class="mtk5">false</span><span class="mtk1">;</span>
<span class="mtk1">}</span>
</pre>
<p>First, we <code>override</code> the <code>kill()</code> function - normally, by calling <code>.kill()</code> on an object, it will set both the <code>alive</code> and <code>exists</code> properties to <code>false</code>. In this case, we want to set <code>alive</code> to <code>false</code>, but we don't want to set <code>exists</code> to <code>false</code> just yet (objects which <code>exists == false</code> don't get drawn or updated). Instead, we initialize a <code>FlxTween</code>.</p>
<p><code>FlxTween</code> is a powerful tool that lets you animate an object's properties. For our coins, we want to make it fade out while also rising up.</p>
<p>We set the duration to <code>0.33</code> seconds, and we are using the <code>circOut</code> easing style, to make the tween look a little nicer. Also we want to call <code>finishKill()</code> when the tween has completed, which just sets the coin's <code>exists</code> property to <code>false</code>, effectively removing it from the screen. By default, the tween type is set to <code>ONESHOT</code> so it is only executed once (instead of looping). You can change this by specifying a different <code>type</code> in the tween options, but in our case the default behavior is just what we need. </p>
<p>The type of the <code>FlxTween</code> complete callback is <code>FlxTween-&gt;Void</code> (receives a single <code>FlxTween</code> argument and returns nothing). In this case, we named it <code>_</code> to indicate that we don't care about it, which is a common Haxe idiom (other than that, there's nothing special about it - to the compiler it's just an argument named <code>_</code>).</p>
</li>
</ol>
<p>Try out the game now, and you'll notice the difference when you pick up coins! We'll do some more of this later on when we start adding 'juice' to our game.</p>
<p><img src="../images/01_tutorial/browser_coins.png" alt="" /></p>
<p>In the next part, we'll talk about enemies!</p>


			<br />
			<hr />

			<ul class="pager">
				

				<li class="previous">
					<a href="/documentation/zoom-and-cameras">&lt; 7 - Zoom and Cameras</a>
				</li>
				


				
				<li class="next">
					<a href="/documentation/enemies-and-basic-ai">9 - Enemies and Basic AI &gt;</a>
				</li>
				
			</ul>


		</div>
	</div>
</div>

<footer>
	<div class="footer-main">
		<div class=" container">

			<div class="footer-social">

				<iframe width="120px" scrolling="0" height="20px" frameborder="0" allowtransparency="true" src="https://ghbtns.com/github-btn.html?user=HaxeFlixel&amp;repo=flixel&amp;type=watch&amp;count=true&amp;size=small"></iframe>

				<a href="https://twitter.com/haxeflixel" class="twitter-follow-button" data-show-count="true" data-lang="en" data-size="small">Follow @haxeflixel</a>

				<a class="footer-patreon" href="https://www.patreon.com/haxeflixel" alt="Patreon" title="Support us on Patreon">
					<img src="/images/patreon-logo-small.svg" alt="Haxeflixel Patreon" title="Patreon" />
				</a>

				<script>!function (d, s, id)
				{
					var js, fjs = d.getElementsByTagName (s)[0];
					if (!d.getElementById (id))
					{
						js = d.createElement (s);
						js.id = id;
						js.src = "//platform.twitter.com/widgets.js";
						fjs.parentNode.insertBefore (js, fjs);
					}
				} (document, "script", "twitter-wjs");</script>

			</div>

			<div class="footer-powered-by">
				<p>HaxeFlixel is powered by</p>
				<a href="http://haxe.org"><img src="/images/haxe.svg" alt="Haxe" title="Haxe" /></a>
				+
				<a href="http://openfl.org"><img class="openfl-footer-logo" src="/images/openfl.svg" alt="OpenFL" title="OpenFL" /></a>
				+
				<a href="http://flixel.org"><img class="flixel-footer-logo" src="/images/flixel.svg" alt="Flixel" title="Flixel" /></a>
			</div>

		</div>
	</div>
</footer>

<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-35511281-1');
ga('send', 'pageview');</script><script defer="defer" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script defer="defer" src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script><script defer="defer" src="/vendor/twitter-bootstrap-3/js/dropdown.js"></script><script defer="defer" src="/vendor/twitter-bootstrap-3/js/transition.js"></script><script defer="defer" src="/vendor/twitter-bootstrap-3/js/collapse.js"></script>




</body></html>