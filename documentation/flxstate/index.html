<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>

	<meta charset="utf-8" />
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<title>FlxState | HaxeFlixel 2D Game Engine</title>

	<meta name="description" content="HaxeFlixel is a 2D Game Engine that lets you create cross-platform games easier with free, open source technology!" />
	<meta name="keywords" content="gamedev, game development, cross-platform, haxe, flixel" />
	<meta name="author" content="" />
	<meta name="viewport" content="width=device-width" />

	<link rel="shortcut icon" href="/images/favicon.ico" />

	<!--[if lt IE 9]>
	<script async src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<link rel="stylesheet" href="/styles/style.css" />

</head>


<body>

<header>
	<nav>

		<div class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">

				<div class="navbar-header">
					<button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
						<span class="icon-bar">
						<span class="icon-bar">
						<span class="icon-bar">
					</span></span></span></button>
					<a href="/" class="navbar-brand"><img src="/images/haxeflixel-header.png" alt="HaxeFlixel" /></a>
				</div>

				<div class="navbar-collapse collapse">

					<ul class="nav navbar-nav">

						<li class="dropdown ">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Examples <span class="caret"></span></a>
							<ul class="dropdown-menu inverse-dropdown">
							  <li><a href="/demos">Demos</a></li>
							  <li><a href="https://snippets.haxeflixel.com/">Snippets</a></li>
							</ul>
						</li>

						<li>
							<a href="/showcase">Showcase</a>
						</li>

						<li>
							<a href="/blog">Blog</a>
						</li>

						<li class="active">
							<a href="/documentation">Docs</a>
						</li>

						<li>
							<a href="http://api.haxeflixel.com">API</a>
						</li>

						<li>
							<a href="https://github.com/HaxeFlixel/flixel/discussions">Forum</a>
						</li>

					</ul>
		
					<form class="navbar-form search-form" role="search" action="https://google.com/search" method="get">
    <div class="form-group">
        <input type="search" name="q" class="form-control" placeholder="Search" />
        <input type="hidden" name="q" value="site:http://haxeflixel.com" />
    </div>
</form>

				</div>

			</div>

		</div>

	</nav>
</header>

<div class="container container-main">
	<div class="row">

		<div class="col-md-3">
			<div class="doc-nav affix">
				<ul class="nav">



	<li>
		<h4><a href="/documentation/getting-started">Getting Started</a></h4><h4>
	</h4></li>

	



	<li>
		<h4><a href="/documentation/tutorial">Tutorial</a></h4><h4>
	</h4></li>

	



	<li>
		<h4><a href="/documentation/haxeflixel-handbook">HaxeFlixel Handbook</a></h4><h4>
	</h4></li>

	
		
			<li class="about=&quot;/documentation/haxeflixel-handbook&quot;">
				<a href="/documentation/haxeflixel-handbook"> HaxeFlixel Handbook </a>
			</li>
		
			<li class="about=&quot;/documentation/flixel-display-list&quot;">
				<a href="/documentation/flixel-display-list"> Flixel Display List </a>
			</li>
		
			<li class="about=&quot;/documentation/flxgroup&quot;">
				<a href="/documentation/flxgroup"> FlxGroup </a>
			</li>
		
			<li class="about=&quot;/documentation/flxsprite&quot;">
				<a href="/documentation/flxsprite"> FlxSprite </a>
			</li>
		
			<li class="active" about="/documentation/flxstate">
				<a href="/documentation/flxstate"> FlxState </a>
			</li>
		
			<li class="about=&quot;/documentation/flxsave&quot;">
				<a href="/documentation/flxsave"> FlxSave </a>
			</li>
		
			<li class="about=&quot;/documentation/flxtween&quot;">
				<a href="/documentation/flxtween"> FlxTween </a>
			</li>
		
			<li class="about=&quot;/documentation/haxeflixel-conditionals&quot;">
				<a href="/documentation/haxeflixel-conditionals"> HaxeFlixel Conditionals </a>
			</li>
		
			<li class="about=&quot;/documentation/haxeflixel-targets&quot;">
				<a href="/documentation/haxeflixel-targets"> HaxeFlixel Targets </a>
			</li>
		
			<li class="about=&quot;/documentation/desktop-targets&quot;">
				<a href="/documentation/desktop-targets"> Desktop Targets </a>
			</li>
		
			<li class="about=&quot;/documentation/mobile-targets&quot;">
				<a href="/documentation/mobile-targets"> Mobile Targets </a>
			</li>
		
			<li class="about=&quot;/documentation/android&quot;">
				<a href="/documentation/android"> Android </a>
			</li>
		
			<li class="about=&quot;/documentation/ios&quot;">
				<a href="/documentation/ios"> iOS </a>
			</li>
		
			<li class="about=&quot;/documentation/neko&quot;">
				<a href="/documentation/neko"> Neko </a>
			</li>
		
			<li class="about=&quot;/documentation/keyboard&quot;">
				<a href="/documentation/keyboard"> Keyboard </a>
			</li>
		
			<li class="about=&quot;/documentation/mouse&quot;">
				<a href="/documentation/mouse"> Mouse </a>
			</li>
		
			<li class="about=&quot;/documentation/gamepads&quot;">
				<a href="/documentation/gamepads"> Gamepads </a>
			</li>
		
			<li class="about=&quot;/documentation/actions&quot;">
				<a href="/documentation/actions"> Actions </a>
			</li>
		
			<li class="about=&quot;/documentation/troubleshooting&quot;">
				<a href="/documentation/troubleshooting"> Troubleshooting </a>
			</li>
		
			<li class="about=&quot;/documentation/debugger&quot;">
				<a href="/documentation/debugger"> Debugger </a>
			</li>
		
			<li class="about=&quot;/documentation/debugger-interaction&quot;">
				<a href="/documentation/debugger-interaction"> Debugger - Interaction </a>
			</li>
		
	



	<li>
		<h4><a href="/documentation/resources">Resources</a></h4><h4>
	</h4></li>

	



	<li>
		<h4><a href="/documentation/community">Community</a></h4><h4>
	</h4></li>

	



</ul>
			</div>
		</div>

		<div class="col-md-9 doc-content" role="main">
			<h1 class="title">FlxState</h1>

			
				<a href="http://api.haxeflixel.com/flixel/FlxState.html" class="btn btn-sm btn-api" target="_blank"><span class="glyphicon glyphicon-cog"></span> API </a>
			
			<a href="https://github.com/HaxeFlixel/flixel-docs/blob/master/documentation/02_handbook/04-flxstate.html.md" class="btn btn-sm btn-edit" target="_blank"><span class="glyphicon glyphicon-pencil"></span> Edit </a>

			<p>This is the basis for your game's levels and menus, each described in a "state" structure. The state is a way of organising your game objects for the state that the game is currently in. For example, when you create level 0 of your game it's much more organized to only have the code for that level, not every level. Also it's good to use switching states to clear your memory, to avoid memory leaks. A typical Flixel game will have a separate <code>FlxState</code> class for every level and menu.</p>
<p><img src="../images/02_handbook/flixel-state-0.png" width="100%" /></p>
<p>In each <code>FlxState</code> all the FlxSprites are added to be rendered.</p>
<p><img src="../images/02_handbook/flixel-state-1.png" width="100%" /></p>
<h3 id="important-methods">Important Methods</h3>
<h4 id="create-">create()</h4>
<p>This is where you setup and create all your state's objects; for example your level tilemaps, your player sprites, spawn your initial enemies. Flixel runs this method before it starts to render your state so its the perfect place.</p>
<h4 id="add-object-flxbasic-">add(object:FlxBasic)</h4>
<p>This is the place where you add your sprites, tilemaps etc to your state to be rendered. It works similar to OpenFL's display list API with <code>addChild()</code>.</p>
<h4 id="remove-object-flxbasic-">remove(object:FlxBasic)</h4>
<p>This is the place where you remove sprites etc you have added to your state. Everything you remove still exists so you can add it back later. If you're not going to use the removed object again you might want to consider removing it from memory by setting it as null for example.</p>
<h4 id="update-elapsed-float-">update(elapsed:Float)</h4>
<p>This is the place where you can run code on every frame of your game. It's where you setup your input controls, trigger movement and almost all of your gameplay logic.</p>
<pre xmlns="" class="highlighted">
<span class="mtk5">package</span><span class="mtk1">;</span>

<span class="mtk16">import</span><span class="mtk1"> flixel.</span><span class="mtk11">FlxState</span><span class="mtk1">;</span>

<span class="mtk5">class</span><span class="mtk1"> </span><span class="mtk11">FlxExampleState</span><span class="mtk1"> </span><span class="mtk5">extends</span><span class="mtk1"> </span><span class="mtk11">FlxState</span>
<span class="mtk1">{</span>
<span class="mtk1">    </span><span class="mtk5">override</span><span class="mtk1"> </span><span class="mtk5">public</span><span class="mtk1"> </span><span class="mtk5">function</span><span class="mtk1"> </span><span class="mtk12">create</span><span class="mtk1">()</span><span class="mtk17">:</span><span class="mtk11">Void</span>
<span class="mtk1">    {</span>
<span class="mtk1">        </span><span class="mtk4">//create your state objects here</span>
<span class="mtk1">    }</span>

<span class="mtk1">    </span><span class="mtk5">override</span><span class="mtk1"> </span><span class="mtk5">public</span><span class="mtk1"> </span><span class="mtk5">function</span><span class="mtk1"> </span><span class="mtk12">update</span><span class="mtk1">(</span><span class="mtk13">elapsed</span><span class="mtk17">:</span><span class="mtk11">Float</span><span class="mtk1">)</span><span class="mtk17">:</span><span class="mtk11">Void</span>
<span class="mtk1">    {</span>
<span class="mtk1">        </span><span class="mtk4">//call super to update the core state class</span>
<span class="mtk1">        </span><span class="mtk5">super</span><span class="mtk1">.</span><span class="mtk12">update</span><span class="mtk1">(</span><span class="mtk13">elapsed</span><span class="mtk1">);</span>
<span class="mtk1">    }</span>
<span class="mtk1">}</span>
</pre>
<p>Here is an example of a simple game state;</p>
<pre xmlns="" class="highlighted">
<span class="mtk5">package</span><span class="mtk1">;</span>

<span class="mtk16">import</span><span class="mtk1"> flixel.tile.</span><span class="mtk11">FlxTilemap</span><span class="mtk1">;</span>
<span class="mtk16">import</span><span class="mtk1"> flixel.</span><span class="mtk11">FlxG</span><span class="mtk1">;</span>
<span class="mtk16">import</span><span class="mtk1"> flixel.</span><span class="mtk11">FlxSprite</span><span class="mtk1">;</span>
<span class="mtk16">import</span><span class="mtk1"> flixel.</span><span class="mtk11">FlxState</span><span class="mtk1">;</span>
<span class="mtk16">import</span><span class="mtk1"> flixel.graphics.</span><span class="mtk11">FlxGraphic</span><span class="mtk1">;</span>

<span class="mtk5">class</span><span class="mtk1"> </span><span class="mtk11">FlxExampleState</span><span class="mtk1"> </span><span class="mtk5">extends</span><span class="mtk1"> </span><span class="mtk11">FlxState</span>
<span class="mtk1">{</span>
<span class="mtk1">    </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk13">wizard</span><span class="mtk17">:</span><span class="mtk11">FlxSprite</span><span class="mtk1">;</span>
<span class="mtk1">    </span><span class="mtk5">var</span><span class="mtk1"> </span><span class="mtk13">level</span><span class="mtk17">:</span><span class="mtk11">FlxTilemap</span><span class="mtk1">;</span>

<span class="mtk1">    </span><span class="mtk5">override</span><span class="mtk1"> </span><span class="mtk5">public</span><span class="mtk1"> </span><span class="mtk5">function</span><span class="mtk1"> </span><span class="mtk12">create</span><span class="mtk1">()</span><span class="mtk17">:</span><span class="mtk11">Void</span>
<span class="mtk1">    {</span>
<span class="mtk1">        </span><span class="mtk4">//create a main player</span>
<span class="mtk1">        </span><span class="mtk13">wizard</span><span class="mtk1"> </span><span class="mtk17">=</span><span class="mtk1"> </span><span class="mtk5">new</span><span class="mtk1"> </span><span class="mtk11">FlxSprite</span><span class="mtk1">(</span><span class="mtk8">200</span><span class="mtk1">, </span><span class="mtk8">200</span><span class="mtk1">, </span><span class="mtk9">'assets/player.png'</span><span class="mtk1">);</span>
<span class="mtk1">        </span><span class="mtk13">wizard</span><span class="mtk1">.</span><span class="mtk13">maxVelocity</span><span class="mtk1">.</span><span class="mtk12">set</span><span class="mtk1">(</span><span class="mtk8">80</span><span class="mtk1">, </span><span class="mtk8">200</span><span class="mtk1">);</span>
<span class="mtk1">        </span><span class="mtk13">wizard</span><span class="mtk1">.</span><span class="mtk13">acceleration</span><span class="mtk1">.</span><span class="mtk13">y</span><span class="mtk1"> </span><span class="mtk17">=</span><span class="mtk1"> </span><span class="mtk8">200</span><span class="mtk1">; </span><span class="mtk4">// gravity</span>
<span class="mtk1">        </span><span class="mtk13">wizard</span><span class="mtk1">.</span><span class="mtk13">drag</span><span class="mtk1">.</span><span class="mtk13">x</span><span class="mtk1"> </span><span class="mtk17">=</span><span class="mtk1"> </span><span class="mtk13">wizard</span><span class="mtk1">.</span><span class="mtk13">maxVelocity</span><span class="mtk1">.</span><span class="mtk13">x</span><span class="mtk1"> </span><span class="mtk17">*</span><span class="mtk1"> </span><span class="mtk8">4</span><span class="mtk1">;</span>
<span class="mtk1">        </span><span class="mtk12">add</span><span class="mtk1">(</span><span class="mtk13">wizard</span><span class="mtk1">);</span>

<span class="mtk1">        </span><span class="mtk4">//create a tilemap level</span>
<span class="mtk1">        </span><span class="mtk13">level</span><span class="mtk1"> </span><span class="mtk17">=</span><span class="mtk1"> </span><span class="mtk5">new</span><span class="mtk1"> </span><span class="mtk11">FlxTilemap</span><span class="mtk1">();</span>
<span class="mtk1">        </span><span class="mtk13">level</span><span class="mtk1">.</span><span class="mtk12">loadMap</span><span class="mtk1">(</span><span class="mtk9">'assets/level.csv'</span><span class="mtk1">, </span><span class="mtk11">FlxGraphic</span><span class="mtk1">.</span><span class="mtk12">fromClass</span><span class="mtk1">(</span><span class="mtk11">GraphicAuto</span><span class="mtk1">), </span><span class="mtk8">0</span><span class="mtk1">, </span><span class="mtk8">0</span><span class="mtk1">, </span><span class="mtk13">AUTO</span><span class="mtk1">);</span>
<span class="mtk1">        </span><span class="mtk12">add</span><span class="mtk1">(</span><span class="mtk13">level</span><span class="mtk1">);</span>
<span class="mtk1">    }</span>

<span class="mtk1">    </span><span class="mtk5">override</span><span class="mtk1"> </span><span class="mtk5">public</span><span class="mtk1"> </span><span class="mtk5">function</span><span class="mtk1"> </span><span class="mtk12">update</span><span class="mtk1">(</span><span class="mtk13">elapsed</span><span class="mtk17">:</span><span class="mtk11">Float</span><span class="mtk1">)</span><span class="mtk17">:</span><span class="mtk11">Void</span>
<span class="mtk1">    {</span>
<span class="mtk1">        </span><span class="mtk4">//control the player with keyboard</span>
<span class="mtk1">        </span><span class="mtk13">wizard</span><span class="mtk1">.</span><span class="mtk13">acceleration</span><span class="mtk1">.</span><span class="mtk13">x</span><span class="mtk1"> </span><span class="mtk17">=</span><span class="mtk1"> </span><span class="mtk8">0</span><span class="mtk1">;</span>

<span class="mtk1">        </span><span class="mtk16">if</span><span class="mtk1"> (</span><span class="mtk11">FlxG</span><span class="mtk1">.</span><span class="mtk13">keys</span><span class="mtk1">.</span><span class="mtk13">pressed</span><span class="mtk1">.</span><span class="mtk13">LEFT</span><span class="mtk1">)</span>
<span class="mtk1">        {</span>
<span class="mtk1">            </span><span class="mtk13">wizard</span><span class="mtk1">.</span><span class="mtk13">acceleration</span><span class="mtk1">.</span><span class="mtk13">x</span><span class="mtk1"> </span><span class="mtk17">=</span><span class="mtk1"> </span><span class="mtk17">-</span><span class="mtk13">wizard</span><span class="mtk1">.</span><span class="mtk13">maxVelocity</span><span class="mtk1">.</span><span class="mtk13">x</span><span class="mtk1"> </span><span class="mtk17">*</span><span class="mtk1"> </span><span class="mtk8">4</span><span class="mtk1">;</span>
<span class="mtk1">        }</span>
<span class="mtk1">        </span><span class="mtk16">if</span><span class="mtk1"> (</span><span class="mtk11">FlxG</span><span class="mtk1">.</span><span class="mtk13">keys</span><span class="mtk1">.</span><span class="mtk13">pressed</span><span class="mtk1">.</span><span class="mtk13">RIGHT</span><span class="mtk1">)</span>
<span class="mtk1">        {</span>
<span class="mtk1">            </span><span class="mtk13">wizard</span><span class="mtk1">.</span><span class="mtk13">acceleration</span><span class="mtk1">.</span><span class="mtk13">x</span><span class="mtk1"> </span><span class="mtk17">=</span><span class="mtk1"> </span><span class="mtk13">wizard</span><span class="mtk1">.</span><span class="mtk13">maxVelocity</span><span class="mtk1">.</span><span class="mtk13">x</span><span class="mtk1"> </span><span class="mtk17">*</span><span class="mtk1"> </span><span class="mtk8">4</span><span class="mtk1">;</span>
<span class="mtk1">        }</span>
<span class="mtk1">        </span><span class="mtk16">if</span><span class="mtk1"> (</span><span class="mtk11">FlxG</span><span class="mtk1">.</span><span class="mtk13">keys</span><span class="mtk1">.</span><span class="mtk13">justPressed</span><span class="mtk1">.</span><span class="mtk13">SPACE</span><span class="mtk1"> </span><span class="mtk17">&amp;&amp;</span><span class="mtk1"> </span><span class="mtk13">wizard</span><span class="mtk1">.</span><span class="mtk12">isTouching</span><span class="mtk1">(</span><span class="mtk13">FLOOR</span><span class="mtk1">))</span>
<span class="mtk1">        {</span>
<span class="mtk1">            </span><span class="mtk13">wizard</span><span class="mtk1">.</span><span class="mtk13">velocity</span><span class="mtk1">.</span><span class="mtk13">y</span><span class="mtk1"> </span><span class="mtk17">=</span><span class="mtk1"> </span><span class="mtk17">-</span><span class="mtk13">wizard</span><span class="mtk1">.</span><span class="mtk13">maxVelocity</span><span class="mtk1">.</span><span class="mtk13">y</span><span class="mtk1"> </span><span class="mtk17">/</span><span class="mtk1"> </span><span class="mtk8">2</span><span class="mtk1">;</span>
<span class="mtk1">        }</span>
<span class="mtk1">        </span><span class="mtk5">super</span><span class="mtk1">.</span><span class="mtk12">update</span><span class="mtk1">(</span><span class="mtk13">elapsed</span><span class="mtk1">);</span>
<span class="mtk1">    }</span>
<span class="mtk1">}</span>
</pre>


			<br />
			<hr />

			<ul class="pager">
				

				<li class="previous">
					<a href="/documentation/flxsprite">&lt; FlxSprite</a>
				</li>
				


				
				<li class="next">
					<a href="/documentation/flxsave">FlxSave &gt;</a>
				</li>
				
			</ul>


		</div>
	</div>
</div>

<footer>
	<div class="footer-main">
		<div class=" container">

			<div class="footer-social">

				<iframe width="120px" scrolling="0" height="20px" frameborder="0" allowtransparency="true" src="https://ghbtns.com/github-btn.html?user=HaxeFlixel&amp;repo=flixel&amp;type=watch&amp;count=true&amp;size=small"></iframe>

				<a href="https://twitter.com/haxeflixel" class="twitter-follow-button" data-show-count="true" data-lang="en" data-size="small">Follow @haxeflixel</a>

				<a class="footer-patreon" href="https://www.patreon.com/haxeflixel" alt="Patreon" title="Support us on Patreon">
					<img src="/images/patreon-logo-small.svg" alt="Haxeflixel Patreon" title="Patreon" />
				</a>

				<script>!function (d, s, id)
				{
					var js, fjs = d.getElementsByTagName (s)[0];
					if (!d.getElementById (id))
					{
						js = d.createElement (s);
						js.id = id;
						js.src = "//platform.twitter.com/widgets.js";
						fjs.parentNode.insertBefore (js, fjs);
					}
				} (document, "script", "twitter-wjs");</script>

			</div>

			<div class="footer-powered-by">
				<p>HaxeFlixel is powered by</p>
				<a href="http://haxe.org"><img src="/images/haxe.svg" alt="Haxe" title="Haxe" /></a>
				+
				<a href="http://openfl.org"><img class="openfl-footer-logo" src="/images/openfl.svg" alt="OpenFL" title="OpenFL" /></a>
				+
				<a href="http://flixel.org"><img class="flixel-footer-logo" src="/images/flixel.svg" alt="Flixel" title="Flixel" /></a>
			</div>

		</div>
	</div>
</footer>

<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-35511281-1');
ga('send', 'pageview');</script><script defer="defer" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script defer="defer" src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script><script defer="defer" src="/vendor/twitter-bootstrap-3/js/dropdown.js"></script><script defer="defer" src="/vendor/twitter-bootstrap-3/js/transition.js"></script><script defer="defer" src="/vendor/twitter-bootstrap-3/js/collapse.js"></script>




</body></html>